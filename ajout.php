<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Ecole Primaire de Djibouti</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">

    <!-- Favicon -->
    <link href="img/favicon.ico" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;500;600&family=Inter:wght@600&family=Lobster+Two:wght@700&display=swap" rel="stylesheet">
    
    <!-- Icon Font Stylesheet -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="lib/animate/animate.min.css" rel="stylesheet">
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">

    <!-- Customized Bootstrap Stylesheet -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link href="css/style.css" rel="stylesheet">
</head>

<body>
    <div class="container-xxl bg-white p-0">
        <!-- Spinner Start -->
        <div id="spinner" class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
            <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
                <span class="sr-only">Loading...</span>
            </div>
        </div>
        <!-- Spinner End -->


        <!-- Navbar Start -->
        <nav class="navbar navbar-expand-lg bg-white navbar-light sticky-top px-4 px-lg-5 py-lg-0">
            <a href="index.html" class="navbar-brand">
                <h1 class="m-0 text-primary"><i class="fa fa-book-reader me-3"></i>Ecole Primaire Djibouti</h1>
            </a>
            <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarCollapse">
                <div class="navbar-nav mx-auto">
                    <a href="index.html" class="nav-item nav-link active">Home</a>
                    <a href="about.html" class="nav-item nav-link">About Us</a>
                    <a href="classes.html" class="nav-item nav-link">Classes</a>
                    <div class="nav-item dropdown">
                        <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">Cycle</a>
                        <div class="dropdown-menu rounded-0 rounded-bottom border-0 shadow-sm m-0">
                            <li> <a href="facility.html" class="dropdown-item">Cycle 1</a>
                                <ul class="dropdown animated-3s fadeInRight">
                                
                        
                                <!-- Niveau 1-->
                    <li> <a href="">Niveau 1</a> 
                        <ul class="dropdown animated-3s fadeInRight">
                            <li> <a href="ajoutclasse.html">Ajout de classe</a> </li>
                          
        
  
                      </ul>
                      </li>
                      <!-- Niveau 2-->
                      <li> <a href="">Niveau 2</a> 
                        <ul class="dropdown animated-3s fadeInRight">
                          <li> <a href="ajoutclasse.html">Ajout de classe</a> </li>
                          
        
  
                      </ul>
                      </li>

                            </ul>
                            </li>
                            <li> <a href="facility.html" class="dropdown-item">Cycle 2</a>
                                <ul class="dropdown animated-3s fadeInRight">
                                
                        
                                <!-- Niveau 1-->
                    <li> <a href="">Niveau 3</a> 
                        <ul class="dropdown animated-3s fadeInRight">
                            <li> <a href="ajoutclasse.html">Ajout de classe</a> </li>
                          
        
  
                      </ul>
                      </li>
                      <!-- Niveau 2-->
                      <li> <a href="">Niveau 4</a> 
                        <ul class="dropdown animated-3s fadeInRight">
                            <li> <a href="ajoutclasse.html">Ajout de classe</a> </li>
                          
        
  
                      </ul>
                      </li>
                      <!-- Niveau 5-->
                      <li> <a href="">Niveau 5</a> 
                        <ul class="dropdown animated-3s fadeInRight">
                            <li> <a href="ajoutclasse.html">Ajout de classe</a> </li>
                          
        
  
                      </ul>
                      </li>  


                            </ul>
                            </li>
                          
                        </div>
                    </div>
                    <a href="contact.html" class="nav-item nav-link">Contact Us</a>
                </div>
                <a href="" class="btn btn-primary rounded-pill px-3 d-none d-lg-block">Join Us<i class="fa fa-arrow-right ms-3"></i></a>
            </div>
        </nav>
        <!-- Navbar End -->







        
        <!-- Carousel Start -->
        <div class="container-fluid p-0 mb-5">
            <div class="owl-carousel header-carousel position-relative">
                <div class="owl-carousel-item position-relative">
                    <img class="img-fluid" src="img/carousel-1.jpg" alt="">
                    <div class="position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center" style="background: rgba(0, 0, 0, .2);">
                        <div class="container">
                            <div class="row justify-content-start">
                                <div class="col-10 col-lg-8">
                                    <h1 class="display-2 text-white animated slideInDown mb-4">La meilleure école primaire pour votre enfant</h1>
                                    <p class="fs-5 fw-medium text-white mb-4 pb-2">Vero elitr justo clita lorem. Ipsum dolor at sed stet sit diam no. Kasd rebum ipsum et diam justo clita et kasd rebum sea elitr.</p>
                                    <a href="" class="btn btn-primary rounded-pill py-sm-3 px-sm-5 me-3 animated slideInLeft">Learn More</a>
                                    <a href="" class="btn btn-dark rounded-pill py-sm-3 px-sm-5 animated slideInRight">Our Classes</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="owl-carousel-item position-relative">
                    <img class="img-fluid" src="img/carousel-2.jpg" alt="">
                    <div class="position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center" style="background: rgba(0, 0, 0, .2);">
                        <div class="container">
                            <div class="row justify-content-start">
                                <div class="col-10 col-lg-8">
                                    <h1 class="display-2 text-white animated slideInDown mb-4">Make A Brighter Future For Your Child</h1>
                                    <p class="fs-5 fw-medium text-white mb-4 pb-2">Vero elitr justo clita lorem. Ipsum dolor at sed stet sit diam no. Kasd rebum ipsum et diam justo clita et kasd rebum sea elitr.</p>
                                    <a href="" class="btn btn-primary rounded-pill py-sm-3 px-sm-5 me-3 animated slideInLeft">Learn More</a>
                                    <a href="" class="btn btn-dark rounded-pill py-sm-3 px-sm-5 animated slideInRight">Our Classes</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Carousel End -->


        <!-- Back to Top -->
        <a href="#" class="btn btn-lg btn-primary btn-lg-square back-to-top"><i class="bi bi-arrow-up"></i></a>
    </div>
    
    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="lib/wow/wow.min.js"></script>
    <script src="lib/easing/easing.min.js"></script>
    <script src="lib/waypoints/waypoints.min.js"></script>
    <script src="lib/owlcarousel/owl.carousel.min.js"></script>
    
    <!-- Template Javascript -->
    <script src="js/main.js"></script>
    </body>
    
    </html>



<?php 
$server="localhost";
$user="root";
$password='';
$BD="con";
$conn=mysqli_connect($server,$user,$password,$BD); 
if (!$conn) {
	die("Connection failed: " . mysqli_connect_error());
	} 
	 $matricule=@$_POST["matricule"];
	 $classe2=@$_POST["classe2"];
	 $mtpaye=@$_POST["mtpaye"];
	 $mess1='';
	 $mess2='';
	 $mess3='';
	 
	 $prenom=@$_POST["prenom"];
	 $nom=@$_POST["nom"];
	 $sexe=@$_POST["sexe"];
	 $dateN=@$_POST["dateN"];
	 $classe=@$_POST["classe"];
	 $quartier=@$_POST["quartier"];
	 $contact=@$_POST["contact"];
	 $s_classe=@$_POST["s_classe"];
	 $s_ecole=@$_POST["s_ecole"];
//Enregistrement des élèves
if(isset($_POST['benrg'])&&!empty($matricule)&&!empty($nom)&&!empty($prenom)&&!empty($sexe)&&!empty($classe)
&&!empty($dateN)&&!empty($quartier)&&!empty($contact)&&!empty($s_classe)&&!empty($s_ecole)){
$sql=mysqli_query($conn,"insert into tb_eleve(matricule,prenom,nom,sexe,dateNaissance,classe,quartier,contacTuteur,situation_classe,situation_ecole) 
values('$matricule','$prenom','$nom','$sexe','$dateN','$classe','$quartier','$contact','$s_classe','$s_ecole')");
if($sql){
echo "<b>Inscription éffectuée avec succès! </b>";
}
else{
 echo"<b>Erreur ! </b>";
}
}


//Modification d'un enregistrement 
if(isset($_POST['bmodif'])&&!empty($matricule)){
//$sql=mysqli_query($conn,"update tb_eleve set prenom='$prenom',nom='$nom',sexe='$sexe',dateNaissance='$dateN',classe='$classe', quartier='$quartier', contacTuteur='$contact',situation_classe='$s_classe',situation_ecole='$s_ecole'  where matricule='$matricule'");
    //prenom
    if(!empty($prenom)){
      mysqli_query($conn,"update tb_eleve set prenom='$prenom' where matricule='$matricule'");
      echo "<b>Modification éffectuée avec succès ! </b>";
    }
    //nom
    if(!empty($nom)){
      mysqli_query($conn,"update tb_eleve set nom='$nom' where matricule='$matricule'");
      echo "<b>Modification éffectuée avec succès ! </b>";
    }
    //sexe
    if(!empty($sexe)){
      mysqli_query($conn,"update tb_eleve set sexe='$sexe' where matricule='$matricule'");
      echo "<b>Modification éffectuée avec succès ! </b>";
    }
    //date de naissance
    if(!empty($dateN)){
      mysqli_query($conn,"update tb_eleve set dateNaissance='$dateN' where matricule='$matricule'");
      echo "<b>Modification éffectuée avec succès ! </b>";
    }
    //classe
    if(!empty($classe)){
      mysqli_query($conn,"update tb_eleve set classe='$classe' where matricule='$matricule'");
      echo "<b>Modification éffectuée avec succès ! </b>";
    }
    //quartier
    if(!empty($quartier)){
      mysqli_query($conn,"update tb_eleve set quartier='$quartier' where matricule='$matricule'");
      echo "<b>Modification éffectuée avec succès ! </b>";
    }
    //Contact tuteur
    if(!empty($contact)){
      mysqli_query($conn,"update tb_eleve set contacTuteur='$contact' where matricule='$matricule'");
      echo "<b>Modification éffectuée avec succès ! </b>";
    }
    //situation en classe
    if(!empty($s_classe)){
      mysqli_query($conn,"update tb_eleve set situation_classe='$s_classe' where matricule='$matricule'");
      echo "<b>Modification éffectuée avec succès ! </b>";
    }
    //situation dans l'école
    if(!empty($s_ecole)){
      mysqli_query($conn,"update tb_eleve set situation_ecole='$s_ecole' where matricule='$matricule'");
      echo "<b>Modification éffectuée avec succès ! </b>";
    }
}
//Supprimer un enregistrement
if(isset($_POST['bsupp'])&&!empty($matricule)){
 $sql= mysqli_query($conn,"delete from tb_eleve where matricule='$matricule'"); 
 if($sql){
 echo "<b>Suppréssion éffectuée avec succès ! </b>";
 }
 else{
    echo "<b>Erreur ! </b>";
 }

}

               
//comparaison des matricules de la table et du formulaire
$sqrech=mysqli_query($conn,"select count(*) as nbcompte from tb_eleve where matricule='$matricule'");
if($rsrech=mysqli_fetch_assoc($sqrech)){
  $compteur=$rsrech['nbcompte'];
}
if(isset($_POST['brech'])&&!empty($matricule)){
if($compteur==0){
    echo "<b>   Introuvable !</b>";
}
}

//affichage du résultat de recherche
	   
if(isset($_POST['brech'])&&!empty($matricule)&&($compteur==1)){
	
	
	$exe=mysqli_query($conn,"select * from tb_eleve where matricule = '$matricule'");
	if($rst=mysqli_fetch_assoc($exe)){
	  echo"<br><b>Voici les renseignements sur le numéro de matricule ".$rst['matricule']." :</b><br>";
	  echo"<br><b>Prénom : ".$rst['prenom']."</b><br><br>";
	  echo"<b>Nom : ".$rst['nom']."</b><br><br>";
	  echo"<b>Sexe : ".$rst['sexe']."</b><br><br>";
	  echo"<b>Date de naissance : ".$rst['dateNaissance']."</b><br><br>";
	  echo"<b>Classe : ".$rst['classe']."</b><br><br>";
	  echo"<b>Quartier : ".$rst['quartier']."</b><br><br>";
	  echo"<b>Contact du tuteur : ".$rst['contacTuteur']."</b><br><br>";
	  echo"<b>Situation en classe : ".$rst['situation_classe']."</b><br><br>";
	  echo"<b>Situation dans l'école : ".$rst['situation_ecole']."</b><br><br>";}}




      //affichage de la liste des eleves d'une classe
	if(isset($_POST['bliste'])&& !empty($classe2)){
        $rq1=mysqli_query($conn,"select * from frais_eleve where classe='$classe2' ");
        print'<table border="1" class="tab"><tr><th>Matricule</th><th>Nom</th><th>Prénom</th><th>Sexe</th><th>Montant payé (cfa)</th><th>Classe</th></tr>';
        
        while($rst=mysqli_fetch_assoc($rq1)){
         
          $matri=$rst['matricule'];
                $lenom=$rst['nom'];
                $leprenom=$rst['prenom'];
                $lesexe=$rst['sexe'];
                $laclasse=$rst['classe'];
                $mtp=$rst['montantPaye'];
                 print"<tr>";
                 echo"<td>$matri</td>";
                 echo"<td>$lenom</td>";
                 echo"<td>$leprenom</td>";
                 echo"<td>$lesexe</td>";
                 echo"<td>$mtp</td>";
                 echo"<td>$laclasse</td>";
                 print"</tr>";
        }
        print'</table>';
        //affichage effectif
            //nbre total d'eleves
        $rq2=mysqli_query($conn,"select count(matricule) as total from tb_eleve where classe='$classe2'");
            if($rst2=mysqli_fetch_assoc($rq2)){
            $total=$rst2['total'];
            }
            //nbre total de garçons
            $rq3=mysqli_query($conn,"select count(matricule) as totalg from tb_eleve where classe='$classe2' and sexe='MASCULIN'");
            if($rst3=mysqli_fetch_assoc($rq3)){
            $totalg=$rst3['totalg'];
            }
            //nbre total de filles
            $rq4=mysqli_query($conn,"select count(matricule) as totalf from tb_eleve where classe='$classe2' and sexe='FEMININ'");
            if($rst4=mysqli_fetch_assoc($rq4)){
            $totalf=$rst4['totalf'];
            }
            echo"<b>Effectif de la classe de $classe2 : </b><br>";
            echo "<b>Nombre total d'élèves : $total </b><br>";
            echo "<b>Nombre total des garçons : $totalg </b><br>";
            echo "<b>Nombre total des filles : $totalf </b><br>";
            print"<br><br>";
        }
        

?>

